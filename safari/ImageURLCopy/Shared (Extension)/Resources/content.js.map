{"version":3,"file":"content.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://imageurlcpy/./src/locales/zh_CN.ts","webpack://imageurlcpy/./src/locales/en.ts","webpack://imageurlcpy/./src/locales/ja.ts","webpack://imageurlcpy/./src/locales/fr.ts","webpack://imageurlcpy/./src/locales/es.ts","webpack://imageurlcpy/./src/utils/i18n.ts","webpack://imageurlcpy/./src/content.ts"],"sourcesContent":["export const zh_CN = {\n    appName: \"ImageURLcpy\",\n    appDesc: \"快速捕获并复制网页中的图片URL\",\n    popup: {\n        title: \"ImageURLcpy\",\n        desc: \"点击下方按钮开始捕获图片URL\",\n        statusStandby: \"待机中\",\n        statusCapturing: \"正在捕获...\",\n        statusSuccess: \"已复制！\",\n        copiedCount: \"已捕获: {count} 个链接\",\n        btnStart: \"开始捕获\",\n        btnStop: \"停止捕获\",\n        tip: \"悬停图片显示高亮，点击复制URL\",\n        btnSettings: \"设置\"\n    },\n    options: {\n        title: \"ImageURLcpy 设置\",\n        subtitle: \"配置复制URL时的前缀和后缀\",\n        singleUrl: {\n            title: \"单个URL格式\",\n            desc: \"当只捕获一个图片时使用此格式\",\n            prefixObj: \"前缀\",\n            suffixObj: \"后缀\",\n            prefixPlaceholder: \"例如: <img src=&quot;\",\n            suffixPlaceholder: '例如: &quot;>',\n            preview: \"预览\"\n        },\n        multiUrl: {\n            title: \"多个URL格式\",\n            desc: \"当捕获多个图片时，分别设置首个、中间、最后一个URL的格式\",\n            first: {\n                title: \"首个URL\",\n                prefix: \"前缀\",\n                suffix: \"后缀\"\n            },\n            middle: {\n                title: \"中间URL\",\n                prefix: \"前缀\",\n                suffix: \"后缀\"\n            },\n            last: {\n                title: \"最后一个URL\",\n                prefix: \"前缀\",\n                suffix: \"后缀\"\n            },\n            preview: \"预览（3个URL示例）\"\n        },\n        actions: {\n            save: \"保存设置\",\n            reset: \"重置为默认\",\n            savedMsg: \"设置已保存\",\n            resetMsg: \"已恢复默认设置\"\n        },\n        language: {\n            label: \"语言 / Language\"\n        }\n    },\n    content: {\n        toast: {\n            linkCopied: \"链接已拷贝：{url}\",\n            copyFailed: \"复制失败，请重试\",\n            alreadyCaptured: \"该链接已经捕获过了\",\n            startStats: \"图片捕获模式已开启，点击图片复制URL\",\n            stopStats: \"已复制 {count} 个图片链接到剪贴板\",\n            noImageCaptured: \"捕获结束，未捕获任何图片\"\n        },\n        button: {\n            stop: \"停止捕获\"\n        }\n    },\n    contextMenu: {\n        startCapture: \"开始捕获图片URL\"\n    }\n};\n","export const en = {\n    appName: \"ImageURLcpy\",\n    appDesc: \"Quickly capture and copy image URLs from web pages\",\n    popup: {\n        title: \"ImageURLcpy\",\n        desc: \"Click the button below to start capturing image URLs\",\n        statusStandby: \"Standby\",\n        statusCapturing: \"Capturing...\",\n        statusSuccess: \"Copied!\",\n        copiedCount: \"Captured: {count} link(s)\",\n        btnStart: \"Start Capturing\",\n        btnStop: \"Stop Capturing\",\n        tip: \"Hover to highlight, click to copy URL\",\n        btnSettings: \"Settings\"\n    },\n    options: {\n        title: \"ImageURLcpy Settings\",\n        subtitle: \"Configure prefixes and suffixes for copied URLs\",\n        singleUrl: {\n            title: \"Single URL Format\",\n            desc: \"Format used when capturing a single image\",\n            prefixObj: \"Prefix\",\n            suffixObj: \"Suffix\",\n            prefixPlaceholder: 'e.g. <img src=\"',\n            suffixPlaceholder: 'e.g. \">\"',\n            preview: \"Preview\"\n        },\n        multiUrl: {\n            title: \"Multiple URL Format\",\n            desc: \"Set formats for the first, middle, and last URLs when capturing multiple images\",\n            first: {\n                title: \"First URL\",\n                prefix: \"Prefix\",\n                suffix: \"Suffix\"\n            },\n            middle: {\n                title: \"Middle URL\",\n                prefix: \"Prefix\",\n                suffix: \"Suffix\"\n            },\n            last: {\n                title: \"Last URL\",\n                prefix: \"Prefix\",\n                suffix: \"Suffix\"\n            },\n            preview: \"Preview (3 URLs example)\"\n        },\n        actions: {\n            save: \"Save Settings\",\n            reset: \"Reset to Default\",\n            savedMsg: \"Settings saved\",\n            resetMsg: \"Reset to default settings\"\n        },\n        language: {\n            label: \"Language\"\n        }\n    },\n    content: {\n        toast: {\n            linkCopied: \"Link copied: {url}\",\n            copyFailed: \"Copy failed, please try again\",\n            alreadyCaptured: \"This link has already been captured\",\n            startStats: \"Capture mode started. Click images to copy URL\",\n            stopStats: \"Copied {count} image URLs to clipboard\",\n            noImageCaptured: \"Capture ended. No images captured\"\n        },\n        button: {\n            stop: \"Stop Capture\"\n        }\n    },\n    contextMenu: {\n        startCapture: \"Start Capture Image URL\"\n    }\n};\n","export const ja = {\n    appName: \"ImageURLcpy\",\n    appDesc: \"Webページの画像URLを素早くキャプチャしてコピーします\",\n    popup: {\n        title: \"ImageURLcpy\",\n        desc: \"下のボタンをクリックして画像のキャプチャを開始します\",\n        statusStandby: \"待機中\",\n        statusCapturing: \"キャプチャ中...\",\n        statusSuccess: \"コピーしました！\",\n        copiedCount: \"取得数: {count} 件\",\n        btnStart: \"キャプチャ開始\",\n        btnStop: \"キャプチャ停止\",\n        tip: \"ホバーで強調表示、クリックでURLをコピー\",\n        btnSettings: \"設定\"\n    },\n    options: {\n        title: \"ImageURLcpy 設定\",\n        subtitle: \"コピーするURLの接頭辞と接尾辞を設定します\",\n        singleUrl: {\n            title: \"単一URLの形式\",\n            desc: \"画像を1つだけキャプチャする場合に使用されます\",\n            prefixObj: \"接頭辞 (Prefix)\",\n            suffixObj: \"接尾辞 (Suffix)\",\n            prefixPlaceholder: '例: <img src=\"',\n            suffixPlaceholder: '例: \">\"',\n            preview: \"プレビュー\"\n        },\n        multiUrl: {\n            title: \"複数URLの形式\",\n            desc: \"複数の画像をキャプチャする場合の最初、中間、最後のURL形式を設定します\",\n            first: {\n                title: \"最初のURL\",\n                prefix: \"接頭辞\",\n                suffix: \"接尾辞\"\n            },\n            middle: {\n                title: \"中間のURL\",\n                prefix: \"接頭辞\",\n                suffix: \"接尾辞\"\n            },\n            last: {\n                title: \"最後のURL\",\n                prefix: \"接頭辞\",\n                suffix: \"接尾辞\"\n            },\n            preview: \"プレビュー（3件の例）\"\n        },\n        actions: {\n            save: \"設定を保存\",\n            reset: \"初期設定に戻す\",\n            savedMsg: \"設定を保存しました\",\n            resetMsg: \"初期設定に戻しました\"\n        },\n        language: {\n            label: \"言語 / Language\"\n        }\n    },\n    content: {\n        toast: {\n            linkCopied: \"リンクをコピーしました: {url}\",\n            copyFailed: \"コピーに失敗しました。もう一度お試しください\",\n            alreadyCaptured: \"このリンクはすでに取得済みです\",\n            startStats: \"キャプチャモードを開始しました。画像をクリックしてURLをコピー\",\n            stopStats: \"{count} 個の画像URLをクリップボードにコピーしました\",\n            noImageCaptured: \"キャプチャを終了しました。画像は取得されませんでした\"\n        },\n        button: {\n            stop: \"キャプチャ停止\"\n        }\n    },\n    contextMenu: {\n        startCapture: \"画像URLのキャプチャを開始\"\n    }\n};\n","export const fr = {\n    appName: \"ImageURLcpy\",\n    appDesc: \"Capturez et copiez rapidement les URL d'images des pages Web\",\n    popup: {\n        title: \"ImageURLcpy\",\n        desc: \"Cliquez ci-dessous pour commencer à capturer les URL\",\n        statusStandby: \"En attente\",\n        statusCapturing: \"Capture en cours...\",\n        statusSuccess: \"Copié !\",\n        copiedCount: \"Capturé : {count} lien(s)\",\n        btnStart: \"Commencer\",\n        btnStop: \"Arrêter\",\n        tip: \"Survolez pour mettre en surbrillance, cliquez pour copier\",\n        btnSettings: \"Paramètres\"\n    },\n    options: {\n        title: \"Paramètres ImageURLcpy\",\n        subtitle: \"Configurer les préfixes et suffixes pour les URL copiées\",\n        singleUrl: {\n            title: \"Format URL unique\",\n            desc: \"Format utilisé lors de la capture d'une seule image\",\n            prefixObj: \"Préfixe\",\n            suffixObj: \"Suffixe\",\n            prefixPlaceholder: 'ex: <img src=\"',\n            suffixPlaceholder: 'ex: \">\"',\n            preview: \"Aperçu\"\n        },\n        multiUrl: {\n            title: \"Format URL multiple\",\n            desc: \"Définir les formats pour la première, les intermédiaires et la dernière URL\",\n            first: {\n                title: \"Première URL\",\n                prefix: \"Préfixe\",\n                suffix: \"Suffixe\"\n            },\n            middle: {\n                title: \"URL intermédiaire\",\n                prefix: \"Préfixe\",\n                suffix: \"Suffixe\"\n            },\n            last: {\n                title: \"Dernière URL\",\n                prefix: \"Préfixe\",\n                suffix: \"Suffixe\"\n            },\n            preview: \"Aperçu (exemple de 3 URL)\"\n        },\n        actions: {\n            save: \"Enregistrer\",\n            reset: \"Rétablir par défaut\",\n            savedMsg: \"Paramètres enregistrés\",\n            resetMsg: \"Paramètres rétablis par défaut\"\n        },\n        language: {\n            label: \"Langue / Language\"\n        }\n    },\n    content: {\n        toast: {\n            linkCopied: \"Lien copié : {url}\",\n            copyFailed: \"Échec de la copie, veuillez réessayer\",\n            alreadyCaptured: \"Ce lien a déjà été capturé\",\n            startStats: \"Mode capture activé. Cliquez sur les images pour copier l'URL\",\n            stopStats: \"{count} URL d'images copiées dans le presse-papiers\",\n            noImageCaptured: \"Capture terminée. Aucune image capturée\"\n        },\n        button: {\n            stop: \"Arrêter la capture\"\n        }\n    },\n    contextMenu: {\n        startCapture: \"Démarrer la capture d'URL d'image\"\n    }\n};\n","export const es = {\n    appName: \"ImageURLcpy\",\n    appDesc: \"Captura y copia rápidamente URLs de imágenes de páginas web\",\n    popup: {\n        title: \"ImageURLcpy\",\n        desc: \"Haga clic abajo para comenzar a capturar URLs\",\n        statusStandby: \"En espera\",\n        statusCapturing: \"Capturando...\",\n        statusSuccess: \"¡Copiado!\",\n        copiedCount: \"Capturado: {count} enlace(s)\",\n        btnStart: \"Comenzar\",\n        btnStop: \"Detener\",\n        tip: \"Pase el cursor para resaltar, haga clic para copiar\",\n        btnSettings: \"Configuración\"\n    },\n    options: {\n        title: \"Configuración de ImageURLcpy\",\n        subtitle: \"Configurar prefijos y sufijos para las URLs copiadas\",\n        singleUrl: {\n            title: \"Formato de URL única\",\n            desc: \"Formato utilizado al capturar una sola imagen\",\n            prefixObj: \"Prefijo\",\n            suffixObj: \"Sufijo\",\n            prefixPlaceholder: 'ej: <img src=\"',\n            suffixPlaceholder: 'ej: \">\"',\n            preview: \"Vista previa\"\n        },\n        multiUrl: {\n            title: \"Formato de múltiples URLs\",\n            desc: \"Establecer formatos para la primera, intermedias y última URL\",\n            first: {\n                title: \"Primera URL\",\n                prefix: \"Prefijo\",\n                suffix: \"Sufijo\"\n            },\n            middle: {\n                title: \"URL intermedia\",\n                prefix: \"Prefijo\",\n                suffix: \"Sufijo\"\n            },\n            last: {\n                title: \"Última URL\",\n                prefix: \"Prefijo\",\n                suffix: \"Sufijo\"\n            },\n            preview: \"Vista previa (ejemplo de 3 URLs)\"\n        },\n        actions: {\n            save: \"Guardar\",\n            reset: \"Restablecer\",\n            savedMsg: \"Configuración guardada\",\n            resetMsg: \"Configuración restablecida\"\n        },\n        language: {\n            label: \"Idioma / Language\"\n        }\n    },\n    content: {\n        toast: {\n            linkCopied: \"Enlace copiado: {url}\",\n            copyFailed: \"Error al copiar, inténtelo de nuevo\",\n            alreadyCaptured: \"Este enlace ya ha sido capturado\",\n            startStats: \"Modo de captura iniciado. Haga clic en las imágenes para copiar la URL\",\n            stopStats: \"Copiadas {count} URL de imágenes al portapapeles\",\n            noImageCaptured: \"Captura finalizada. No se capturaron imágenes\"\n        },\n        button: {\n            stop: \"Detener captura\"\n        }\n    },\n    contextMenu: {\n        startCapture: \"Iniciar captura de URL de imagen\"\n    }\n};\n","import { zh_CN } from '../locales/zh_CN';\nimport { en } from '../locales/en';\nimport { ja } from '../locales/ja';\nimport { fr } from '../locales/fr';\nimport { es } from '../locales/es';\nexport const LANGUAGES = [\n    { code: 'zh_CN', name: '简体中文' },\n    { code: 'en', name: 'English' },\n    { code: 'ja', name: '日本語' },\n    { code: 'fr', name: 'Français' },\n    { code: 'es', name: 'Español' }\n];\nconst locales = {\n    zh_CN,\n    en,\n    ja,\n    fr,\n    es\n};\nexport class I18n {\n    constructor() {\n        this.currentLang = 'zh_CN';\n        this.listeners = [];\n    }\n    static getInstance() {\n        if (!I18n.instance) {\n            I18n.instance = new I18n();\n        }\n        return I18n.instance;\n    }\n    async init() {\n        // Try to get from storage first\n        const stored = await chrome.storage.sync.get(['language']);\n        if (stored.language && locales[stored.language]) {\n            this.currentLang = stored.language;\n        }\n        else {\n            // Fallback to browser language matching\n            const browserLang = navigator.language.replace('-', '_');\n            if (browserLang.startsWith('zh')) {\n                this.currentLang = 'zh_CN';\n            }\n            else if (browserLang.startsWith('ja')) {\n                this.currentLang = 'ja';\n            }\n            else if (browserLang.startsWith('fr')) {\n                this.currentLang = 'fr';\n            }\n            else if (browserLang.startsWith('es')) {\n                this.currentLang = 'es';\n            }\n            else {\n                this.currentLang = 'en'; // Default fallback\n            }\n        }\n        console.log('I18n initialized with language:', this.currentLang);\n    }\n    getLanguage() {\n        return this.currentLang;\n    }\n    async setLanguage(lang) {\n        if (!locales[lang])\n            return;\n        this.currentLang = lang;\n        await chrome.storage.sync.set({ language: lang });\n        this.notifyListeners();\n    }\n    getMessage(keyPath, params) {\n        const keys = keyPath.split('.');\n        let current = locales[this.currentLang];\n        for (const key of keys) {\n            if (current && current[key] !== undefined) {\n                current = current[key];\n            }\n            else {\n                console.warn(`Missing translation for key: ${keyPath} in ${this.currentLang}`);\n                return keyPath;\n            }\n        }\n        if (typeof current === 'string') {\n            let result = current;\n            if (params) {\n                Object.entries(params).forEach(([k, v]) => {\n                    result = result.replace(`{${k}}`, String(v));\n                });\n            }\n            return result;\n        }\n        return keyPath;\n    }\n    subscribe(listener) {\n        this.listeners.push(listener);\n    }\n    notifyListeners() {\n        this.listeners.forEach(l => l());\n    }\n    /**\n     * Renders all elements with data-i18n attribute in the given root element (or document body)\n     */\n    render(root = document) {\n        const elements = root.querySelectorAll('[data-i18n], [data-i18n-placeholder], [data-i18n-title]');\n        elements.forEach(el => {\n            const key = el.getAttribute('data-i18n');\n            if (key) {\n                const text = this.getMessage(key);\n                // Preserve placeholder text if it's an input\n                if (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement) {\n                    if (el.hasAttribute('placeholder')) {\n                        // If we want to translate placeholders, we might need data-i18n-placeholder\n                        const placeholderKey = el.getAttribute('data-i18n-placeholder');\n                        if (placeholderKey) {\n                            el.placeholder = this.getMessage(placeholderKey);\n                        }\n                    }\n                }\n                else {\n                    el.textContent = text;\n                }\n            }\n            // Handle specific attribute translations if needed (e.g. data-i18n-title)\n            const titleKey = el.getAttribute('data-i18n-title');\n            if (titleKey) {\n                el.setAttribute('title', this.getMessage(titleKey));\n            }\n            const placeholderKey = el.getAttribute('data-i18n-placeholder');\n            if (placeholderKey && (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement)) {\n                el.placeholder = this.getMessage(placeholderKey);\n            }\n        });\n    }\n}\n","import { I18n } from './utils/i18n';\nconst CONTENT_DEFAULT_SETTINGS = {\n    singlePrefix: '',\n    singleSuffix: '',\n    firstPrefix: '',\n    firstSuffix: '',\n    middlePrefix: '',\n    middleSuffix: '',\n    lastPrefix: '',\n    lastSuffix: ''\n};\nconst state = {\n    isCapturing: false,\n    capturedUrls: [],\n    overlay: null,\n    stopButton: null,\n    currentHoveredImg: null,\n    cachedSettings: CONTENT_DEFAULT_SETTINGS\n};\n// Initialize i18n\nconst i18n = I18n.getInstance();\ni18n.init().catch(console.error);\n// Initialize settings\ngetFormatSettings().then(settings => {\n    state.cachedSettings = settings;\n});\n// Listen for language changes and update config\nchrome.storage.onChanged.addListener((changes, area) => {\n    if (area === 'sync') {\n        if (changes.language) {\n            i18n.init().then(() => {\n                // If capturing, update UI immediately\n                if (state.isCapturing && state.stopButton) {\n                    state.stopButton.textContent = i18n.getMessage('content.button.stop');\n                }\n            }).catch(console.error);\n        }\n        // Update cached settings if any format settings changed\n        const settingKeys = Object.keys(CONTENT_DEFAULT_SETTINGS);\n        const hasSettingChange = settingKeys.some(key => key in changes);\n        if (hasSettingChange) {\n            getFormatSettings().then(settings => {\n                state.cachedSettings = settings;\n            });\n        }\n    }\n});\n// Format URLs with prefix/suffix settings\nfunction formatUrls(urls, settings) {\n    if (urls.length === 0)\n        return '';\n    if (urls.length === 1) {\n        return `${settings.singlePrefix}${urls[0]}${settings.singleSuffix}`;\n    }\n    // Multiple URLs\n    const formattedUrls = [];\n    urls.forEach((url, index) => {\n        if (index === 0) {\n            // First URL\n            formattedUrls.push(`${settings.firstPrefix}${url}${settings.firstSuffix}`);\n        }\n        else if (index === urls.length - 1) {\n            // Last URL\n            formattedUrls.push(`${settings.lastPrefix}${url}${settings.lastSuffix}`);\n        }\n        else {\n            // Middle URLs\n            formattedUrls.push(`${settings.middlePrefix}${url}${settings.middleSuffix}`);\n        }\n    });\n    return formattedUrls.join('\\n');\n}\n// Get format settings from storage\nasync function getFormatSettings() {\n    return new Promise((resolve) => {\n        chrome.storage.sync.get(CONTENT_DEFAULT_SETTINGS, (items) => {\n            resolve(items);\n        });\n    });\n}\n// Create the green overlay element\nfunction createOverlay() {\n    const overlay = document.createElement('div');\n    overlay.id = 'imageurlcpy-overlay';\n    overlay.style.cssText = `\n    position: absolute;\n    pointer-events: none;\n    background-color: rgba(74, 103, 65, 0.5);\n    z-index: 2147483646;\n    border-radius: 4px;\n    transition: opacity 0.15s ease;\n  `;\n    document.body.appendChild(overlay);\n    return overlay;\n}\n// Create the stop capture button\nfunction createStopButton() {\n    const button = document.createElement('button');\n    button.id = 'imageurlcpy-stop-button';\n    button.textContent = i18n.getMessage('content.button.stop');\n    button.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    z-index: 2147483647;\n    padding: 12px 24px;\n    background: linear-gradient(135deg, #c45c4a 0%, #a84a3a 100%);\n    color: white;\n    border: none;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    box-shadow: 0 4px 14px rgba(196, 92, 74, 0.4);\n    transition: all 0.2s ease;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  `;\n    button.addEventListener('mouseenter', () => {\n        button.style.transform = 'translateY(-2px)';\n        button.style.boxShadow = '0 6px 20px rgba(196, 92, 74, 0.5)';\n    });\n    button.addEventListener('mouseleave', () => {\n        button.style.transform = 'translateY(0)';\n        button.style.boxShadow = '0 4px 14px rgba(196, 92, 74, 0.4)';\n    });\n    button.addEventListener('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        stopCapture();\n    });\n    document.body.appendChild(button);\n    return button;\n}\n// Show toast notification\nfunction showToast(message) {\n    // Remove existing toast if any\n    const existingToast = document.getElementById('imageurlcpy-toast');\n    if (existingToast) {\n        existingToast.remove();\n    }\n    const toast = document.createElement('div');\n    toast.id = 'imageurlcpy-toast';\n    toast.textContent = message;\n    toast.style.cssText = `\n    position: fixed;\n    bottom: 30px;\n    left: 50%;\n    transform: translateX(-50%);\n    max-width: 400px;\n    padding: 14px 24px;\n    background: #2a2a2a;\n    color: white;\n    border-radius: 8px;\n    font-size: 14px;\n    font-weight: 500;\n    z-index: 2147483647;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);\n    word-break: break-all;\n    text-align: center;\n    animation: imageurlcpy-toast-in 0.3s ease;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    border-left: 3px solid #4a6741;\n  `;\n    document.body.appendChild(toast);\n    // Auto remove after 3 seconds\n    setTimeout(() => {\n        toast.style.animation = 'imageurlcpy-toast-out 0.3s ease forwards';\n        setTimeout(() => toast.remove(), 300);\n    }, 3000);\n}\n// Add animation styles\nfunction addAnimationStyles() {\n    if (document.getElementById('imageurlcpy-styles'))\n        return;\n    const style = document.createElement('style');\n    style.id = 'imageurlcpy-styles';\n    style.textContent = `\n    @keyframes imageurlcpy-toast-in {\n      from {\n        opacity: 0;\n        transform: translateX(-50%) translateY(20px);\n      }\n      to {\n        opacity: 1;\n        transform: translateX(-50%) translateY(0);\n      }\n    }\n    \n    @keyframes imageurlcpy-toast-out {\n      from {\n        opacity: 1;\n        transform: translateX(-50%) translateY(0);\n      }\n      to {\n        opacity: 0;\n        transform: translateX(-50%) translateY(20px);\n      }\n    }\n    \n    .imageurlcpy-capturing img {\n      cursor: pointer !important;\n    }\n  `;\n    document.head.appendChild(style);\n}\n// Position overlay over an image\nfunction positionOverlay(img) {\n    if (!state.overlay)\n        return;\n    const rect = img.getBoundingClientRect();\n    state.overlay.style.top = `${rect.top + window.scrollY}px`;\n    state.overlay.style.left = `${rect.left + window.scrollX}px`;\n    state.overlay.style.width = `${rect.width}px`;\n    state.overlay.style.height = `${rect.height}px`;\n    state.overlay.style.opacity = '1';\n}\n// Hide overlay\nfunction hideOverlay() {\n    if (state.overlay) {\n        state.overlay.style.opacity = '0';\n    }\n    state.currentHoveredImg = null;\n}\n// Handle mouse over on images\nfunction handleMouseOver(e) {\n    if (!state.isCapturing)\n        return;\n    const target = e.target;\n    if (target.tagName === 'IMG') {\n        const img = target;\n        state.currentHoveredImg = img;\n        positionOverlay(img);\n    }\n}\n// Handle mouse out on images\nfunction handleMouseOut(e) {\n    if (!state.isCapturing)\n        return;\n    const target = e.target;\n    if (target.tagName === 'IMG') {\n        hideOverlay();\n    }\n}\n// Handle click on images\nasync function handleClick(e) {\n    if (!state.isCapturing)\n        return;\n    const target = e.target;\n    if (target.tagName === 'IMG') {\n        e.preventDefault();\n        e.stopPropagation();\n        const img = target;\n        const url = img.src;\n        console.log('[ImageURLcpy] Image clicked, URL:', url);\n        if (url && !state.capturedUrls.includes(url)) {\n            state.capturedUrls.push(url);\n            // Use cached settings to avoid async await which breaks Safari clipboard\n            const formattedUrls = formatUrls(state.capturedUrls, state.cachedSettings);\n            // Copy formatted URLs to clipboard\n            navigator.clipboard.writeText(formattedUrls).then(() => {\n                showToast(i18n.getMessage('content.toast.linkCopied', { url: url }));\n            }).catch(err => {\n                console.error('Failed to copy:', err);\n                showToast(i18n.getMessage('content.toast.copyFailed'));\n            });\n        }\n        else if (state.capturedUrls.includes(url)) {\n            showToast(i18n.getMessage('content.toast.alreadyCaptured'));\n        }\n    }\n}\n// Start capture mode\nfunction startCapture() {\n    if (state.isCapturing) {\n        console.log('[ImageURLcpy] Already capturing, ignoring start request');\n        return;\n    }\n    console.log('[ImageURLcpy] Starting capture mode');\n    state.isCapturing = true;\n    state.capturedUrls = [];\n    // Refresh settings\n    getFormatSettings().then(settings => {\n        state.cachedSettings = settings;\n    });\n    addAnimationStyles();\n    // Create overlay if not exists\n    if (!state.overlay) {\n        state.overlay = createOverlay();\n    }\n    // Create stop button\n    if (!state.stopButton) {\n        state.stopButton = createStopButton();\n    }\n    // Add capturing class to body\n    document.body.classList.add('imageurlcpy-capturing');\n    // Add event listeners\n    document.addEventListener('mouseover', handleMouseOver, true);\n    document.addEventListener('mouseout', handleMouseOut, true);\n    document.addEventListener('click', handleClick, true);\n    showToast(i18n.getMessage('content.toast.startStats'));\n}\n// Stop capture mode\nasync function stopCapture(returnUrlsOnly = false) {\n    if (!state.isCapturing)\n        return null;\n    state.isCapturing = false;\n    // Remove event listeners\n    document.removeEventListener('mouseover', handleMouseOver, true);\n    document.removeEventListener('mouseout', handleMouseOut, true);\n    document.removeEventListener('click', handleClick, true);\n    // Remove capturing class\n    document.body.classList.remove('imageurlcpy-capturing');\n    // Hide and remove overlay\n    if (state.overlay) {\n        state.overlay.remove();\n        state.overlay = null;\n    }\n    // Remove stop button\n    if (state.stopButton) {\n        state.stopButton.remove();\n        state.stopButton = null;\n    }\n    // Save the captured URLs before clearing\n    const urlCount = state.capturedUrls.length;\n    const capturedUrlsCopy = [...state.capturedUrls];\n    console.log('[ImageURLcpy] Stopping capture. URLs captured:', urlCount, capturedUrlsCopy);\n    // Prepare content\n    let formattedUrls = '';\n    if (urlCount > 0) {\n        // Use cached settings\n        formattedUrls = formatUrls(capturedUrlsCopy, state.cachedSettings);\n    }\n    // Clear state\n    state.capturedUrls = [];\n    state.currentHoveredImg = null;\n    if (urlCount > 0) {\n        if (returnUrlsOnly) {\n            // Return content for popup to copy\n            showToast(i18n.getMessage('content.toast.stopStats', { count: urlCount }));\n            return formattedUrls;\n        }\n        else {\n            // Copy directly (triggered by on-page button)\n            navigator.clipboard.writeText(formattedUrls).then(() => {\n                showToast(i18n.getMessage('content.toast.stopStats', { count: urlCount }));\n            }).catch(err => {\n                console.error('[ImageURLcpy] Failed to copy:', err);\n                showToast(i18n.getMessage('content.toast.copyFailed'));\n            });\n            return null;\n        }\n    }\n    else {\n        showToast(i18n.getMessage('content.toast.noImageCaptured'));\n        return '';\n    }\n}\n// Listen for messages from background script or popup\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    if (message.action === 'startCapture') {\n        startCapture();\n        sendResponse({ success: true });\n    }\n    else if (message.action === 'stopCapture') {\n        // If called from popup, we want to return the URLs, NOT copy them here\n        stopCapture(true).then((formattedUrls) => {\n            sendResponse({ success: true, formattedUrls: formattedUrls });\n        });\n        return true; // Keep channel open\n    }\n    else if (message.action === 'getStatus') {\n        sendResponse({\n            isCapturing: state.isCapturing,\n            urlCount: state.capturedUrls.length\n        });\n    }\n    return true;\n});\n// Handle scroll to reposition overlay\nwindow.addEventListener('scroll', () => {\n    if (state.isCapturing && state.currentHoveredImg) {\n        positionOverlay(state.currentHoveredImg);\n    }\n}, { passive: true });\n// Handle resize to reposition overlay\nwindow.addEventListener('resize', () => {\n    if (state.isCapturing && state.currentHoveredImg) {\n        positionOverlay(state.currentHoveredImg);\n    }\n}, { passive: true });\n"],"names":[],"ignoreList":[],"sourceRoot":""}